name: Run Pytest

on:
    push:
        branches: [ "main", "dev" ]
    pull_request:
        branches: [ "main", "dev" ]

permissions:
    contents: read

jobs:
    pytest:
        name: pytest
        runs-on: ubuntu-latest

        steps:
        -   uses: actions/checkout@v5
            
        # This will install python from the cached version on Github Actions
        -   name: Set up Python
            uses: actions/setup-python@v6
            with:
                python-version-file: ".python-version"

        -   name: Install UV
            uses: astral-sh/setup-uv@v6
            with:
                enable-cache: true
        
        -   name: Install uv packages
            run: uv sync --all-extras
        
        -   name: Run Pytest
            run: uv run pytest
